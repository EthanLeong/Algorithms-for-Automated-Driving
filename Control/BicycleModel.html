
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kinematic Bicycle Model &#8212; Algorithms for Automated Driving</title>
    
  <link rel="stylesheet" href="../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../_static/car_sketch.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Pure Pursuit" href="PurePursuit.html" />
    <link rel="prev" title="PID Control" href="PID.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/car_sketch_wide.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Algorithms for Automated Driving</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <p class="caption collapsible-parent">
 <span class="caption-text">
  Lane Detection
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../LaneDetection/LaneDetectionOverview.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../LaneDetection/CameraBasics.html">
   Basics of Image Formation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../LaneDetection/Segmentation.html">
   Lane Boundary Segmentation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../LaneDetection/InversePerspectiveMapping.html">
   From Pixels to Meters
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../LaneDetection/Discussion.html">
   Discussion
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Control
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="ControlOverview.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="PID.html">
   PID Control
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Kinematic Bicycle Model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="PurePursuit.html">
   Pure Pursuit
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Discussion.html">
   Discussion
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Appendix
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../Appendix/ExerciseSetup.html">
   Exercise Setup
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Appendix/CarlaInstallation.html">
   Carla Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Appendix/NextChapters.html">
   Future Chapters
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/Control/BicycleModel.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/thomasfermi/Algorithms-for-Automated-Driving"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/thomasfermi/Algorithms-for-Automated-Driving/issues/new?title=Issue%20on%20page%20%2FControl/BicycleModel.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/thomasfermi/Algorithms-for-Automated-Driving/edit/master/book/Control/BicycleModel.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#instantaneous-center-of-rotation-icr">
   Instantaneous center of rotation (ICR)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ackermann-steering-geometry">
   Ackermann steering geometry
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   Kinematic Bicycle model
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="kinematic-bicycle-model">
<h1>Kinematic Bicycle Model<a class="headerlink" href="#kinematic-bicycle-model" title="Permalink to this headline">¶</a></h1>
<p>The pure pursuit method for lateral vehicle control is based on a mathematical model of a vehicle known as the bicycle model. A prerequisite for understanding the bicycle model is the concept of the <em>instantaneous center of rotation</em>.</p>
<div class="section" id="instantaneous-center-of-rotation-icr">
<h2>Instantaneous center of rotation (ICR)<a class="headerlink" href="#instantaneous-center-of-rotation-icr" title="Permalink to this headline">¶</a></h2>
<p>Let us consider a rigid body performing a planar motion. An example would be a vehicle driving on a flat road.
We pick a world coordinate system, for which the <span class="math notranslate nohighlight">\(x-y\)</span> plane coincides with the motion plane of the rigid body.
Now, we pick one point <span class="math notranslate nohighlight">\(\mathbf{r}_0\)</span> within the rigid body as the reference point. We are free to pick <em>any</em> point we want. For our vehicle, we could e.g. use the center of the rear axle.
If we pick another point <span class="math notranslate nohighlight">\(\mathbf{r}\)</span> within the rigid body (for our vehicle maybe the left front tire), then we can express the velocity of that point via</p>
<div class="math notranslate nohighlight" id="equation-eq-rb-velocity">
<span class="eqno">(9)<a class="headerlink" href="#equation-eq-rb-velocity" title="Permalink to this equation">¶</a></span>\[
    \dot{\mathbf{r}} = \dot{\mathbf{r}}_0 + \mathbf{\Omega} \times (\mathbf{r}-\mathbf{r}_0)
\]</div>
<p>Note that a dot means time derivative: <span class="math notranslate nohighlight">\(\frac{d}{dt}\mathbf{r}(t)=\dot{\mathbf{r}}(t)\)</span> and that the angular velocity vector <span class="math notranslate nohighlight">\(\Omega\)</span> does <em>not</em> depend on the choice of <span class="math notranslate nohighlight">\(\mathbf{r}_0\)</span> (for a proof see <a class="reference external" href="https://en.wikipedia.org/wiki/Angular_velocity#Consistency">Wikipedia</a>).</p>
<p><strong>Claim</strong>: For any given point in time, we can find a point <span class="math notranslate nohighlight">\(\mathbf{r}\)</span>, for which <span class="math notranslate nohighlight">\(\dot{\mathbf{r}}=0\)</span>. We call this point the <em>instantaneous center of rotation</em> <span class="math notranslate nohighlight">\(\mathbf{r}_{ICR}\)</span>. Note that <span class="math notranslate nohighlight">\(\mathbf{r}_{ICR}\)</span> does not need to lie inside the rigid body.</p>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<p>The proof regarding the instantaneous center of rotation is taken from this <a class="reference external" href="https://physics.stackexchange.com/a/541554/112050">physics.stackexchange answer by Valter Moretti</a>.</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Proof of the claim</p>
<p>We need to find <span class="math notranslate nohighlight">\(\mathbf{r}\)</span>, for which <span class="math notranslate nohighlight">\(\dot{\mathbf{r}}=0\)</span>. This means</p>
<div class="math notranslate nohighlight">
\[0 = \dot{\mathbf{r}} = \dot{\mathbf{r}_0} + \mathbf{\Omega} \times (\mathbf{r}-\mathbf{r}_0)\]</div>
<p>Note that  <span class="math notranslate nohighlight">\(\mathbf{r}_0(t), \dot{\mathbf{r}_0}(t)\)</span> and <span class="math notranslate nohighlight">\(\mathbf{\Omega}(t)\)</span> are given. We introduce the unknown variable <span class="math notranslate nohighlight">\(\mathbf{X}(t)=\mathbf{r}-\mathbf{r}_0\)</span>. If we can find an <span class="math notranslate nohighlight">\(\mathbf{X}(t)\)</span>, such that <span class="math notranslate nohighlight">\(0=\dot{\mathbf{r}_0} + \mathbf{\Omega} \times \mathbf{X}\)</span>, then we can set <span class="math notranslate nohighlight">\(\mathbf{r} = \mathbf{X} + \mathbf{r}_0\)</span>, and we are done. Since the motion is planar, the angular velocity is <span class="math notranslate nohighlight">\(\mathbf{\Omega}(t)=\Omega(t) (0,0,1)^T\)</span>, and <span class="math notranslate nohighlight">\(\dot{\mathbf{r}_0}=(V_x(t), V_y(t), 0)^T\)</span>. Writing <span class="math notranslate nohighlight">\(\mathbf{X}=(x,y,z)\)</span>, our equation becomes</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{gather} 0&amp; =\dot{\mathbf{r}_0} + \mathbf{\Omega} \times \mathbf{X} = \begin{pmatrix} V_x(t) \\V_y(t) \\ 0 \end{pmatrix} + \begin{pmatrix} 0 \\ 0 \\ \Omega(t) \end{pmatrix} \times \begin{pmatrix} x(t) \\ y(t) \\ z(t) \end{pmatrix} \\ &amp;= \begin{pmatrix} V_x(t) \\V_y(t) \\ 0 \end{pmatrix} + \begin{pmatrix} -y(t) \Omega(t) \\ x (t) \Omega(t) \\ 0 \end{pmatrix} \end{gather}\end{split}\]</div>
<p>This equation can be easily solved for <span class="math notranslate nohighlight">\(\mathbf{X}=(x,y,z)\)</span> by setting <span class="math notranslate nohighlight">\(x=-V_y/\Omega\)</span> and <span class="math notranslate nohighlight">\(y=V_x/\Omega\)</span> and <span class="math notranslate nohighlight">\(z=0\)</span>. This concludes the proof. Note that this proof will fail without the assumption of planar motion. There is no instantaneous center of rotation for a general three dimensional motion.</p>
</div>
<p><strong>Corollary</strong>: For any given point in time, we can choose <span class="math notranslate nohighlight">\(\mathbf{r}_0=\mathbf{r}_{ICR}\)</span> as the reference point. Then, for any point in the rigid body</p>
<div class="math notranslate nohighlight">
\[\dot{\mathbf{r}} = \dot{\mathbf{r}}_{ICR} + \mathbf{\Omega} \times (\mathbf{r}-\mathbf{r}_{ICR})\]</div>
<p>But since <span class="math notranslate nohighlight">\(\dot{\mathbf{r}}_{ICR}=0\)</span>, we have</p>
<div class="math notranslate nohighlight">
\[\dot{\mathbf{r}} = \mathbf{\Omega} \times (\mathbf{r}-\mathbf{r}_{ICR})\]</div>
<p>Hence, the motion of any point in the rigid body <span class="math notranslate nohighlight">\(\mathbf{r}\)</span> is just a pure rotation around the instantaneous center of rotation <span class="math notranslate nohighlight">\(\mathbf{r}_{ICR}\)</span>.</p>
<p>Now let us visualize the ICR and see how it can be used in technical sketches.</p>
<div class="figure align-default" id="icr">
<a class="reference internal image-reference" href="../_images/ICR.svg"><img alt="../_images/ICR.svg" src="../_images/ICR.svg" width="50%" /></a>
<p class="caption"><span class="caption-number">Fig. 20 </span><span class="caption-text">Constructing velocity vectors from a given ICR.</span><a class="headerlink" href="#icr" title="Permalink to this image">¶</a></p>
</div>
<p>If we are given a rigid body (gray rectangle) and its ICR (red dot) as in <a class="reference internal" href="#icr"><span class="std std-numref">Fig. 20</span></a>, this suffices to draw the orientation of the velocity vector for all points in the rigid body. Due to the properties of the cross product, the velocity vector <span class="math notranslate nohighlight">\(\dot{\mathbf{r}}\)</span> (red arrow) is perpendicular to <span class="math notranslate nohighlight">\((\mathbf{r}-\mathbf{r}_{ICR})\)</span>, i.e., the line connecting the ICR and the point (black line).
Note that the velocity vectors could be pointing into the opposite direction and would still be perpendicular. We can only do the correct sketch in this regard if we know the sign of the z-component of <span class="math notranslate nohighlight">\(\mathbf{\Omega}\)</span>. The length of the velocity vector is determined by the length of the black line  <span class="math notranslate nohighlight">\(|(\mathbf{r}-\mathbf{r}_{ICR})|\)</span> and the magnitude of <span class="math notranslate nohighlight">\(\mathbf{\Omega}\)</span>.</p>
<p><a class="reference internal" href="#icr-construction"><span class="std std-numref">Fig. 21</span></a> shows that we can turn this argument around: If we know the velocity vector direction (red arrow) of a point (blue dot) in the rigid body, we can draw a dashed line through the point (blue dot), which is perpendicular to the velocity vector. The ICR needs to lie on this dashed line, otherwise <span class="math notranslate nohighlight">\(\dot{\mathbf{r}}\)</span> and <span class="math notranslate nohighlight">\((\mathbf{r}-\mathbf{r}_{ICR})\)</span> would not be perpendicular. If we know the velocity vector direction of at least two points, we can find the ICR as the intersection of the dashed lines.</p>
<div class="figure align-default" id="icr-construction">
<a class="reference internal image-reference" href="../_images/ICR_construction.svg"><img alt="../_images/ICR_construction.svg" src="../_images/ICR_construction.svg" width="70%" /></a>
<p class="caption"><span class="caption-number">Fig. 21 </span><span class="caption-text">Constructing the ICR from given velocity vectors.</span><a class="headerlink" href="#icr-construction" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="ackermann-steering-geometry">
<h2>Ackermann steering geometry<a class="headerlink" href="#ackermann-steering-geometry" title="Permalink to this headline">¶</a></h2>
<p>Now that we learned about rigid bodies in general, let us study the rigid body of a four-wheeled car, which is steered by the front axle. <a class="reference internal" href="#wheelangle"><span class="std std-numref">Fig. 22</span></a> depicts such a vehicle and introduces the <strong>wheel steer angle</strong> <span class="math notranslate nohighlight">\(\delta\)</span>.</p>
<div class="figure align-default" id="wheelangle">
<a class="reference internal image-reference" href="../_images/WheelAngle.svg"><img alt="../_images/WheelAngle.svg" src="../_images/WheelAngle.svg" width="60%" /></a>
<p class="caption"><span class="caption-number">Fig. 22 </span><span class="caption-text">Definition of wheel steer angle for the left (<span class="math notranslate nohighlight">\(\delta_l\)</span>) and right front wheel (<span class="math notranslate nohighlight">\(\delta_r\)</span>). Steering via the rear wheels is uncommon and will not be considered here.</span><a class="headerlink" href="#wheelangle" title="Permalink to this image">¶</a></p>
</div>
<p>Note that the <em>steering wheel angle</em>  is different from the <em>wheel steer angle</em>. The <em>wheel steer angle</em> is the angle of the wheels, while the <em>steering wheel angle</em> is the angle of the steering wheel (the object the driver holds in her hands). Typically</p>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<p>In the Carla simulator, you directly control the <em>wheel steer angle</em> and do not need to worry about the <em>steering wheel angle</em>.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">wheel_steer_angle</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="p">(</span><span class="n">steering_wheel_angle</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> are car-specific constants, and <code class="docutils literal notranslate"><span class="pre">b</span></code> is the steering wheel offset, something that should ideally be zero.</p>
<p>Preferably, we want our wheels to just roll, but for dynamic maneuvers or on an slippery surface, they will also slip. <a class="reference internal" href="#icr-slip"><span class="std std-numref">Fig. 23</span></a> introduces the important concept of the (side) slip angle.</p>
<div class="figure align-default" id="icr-slip">
<a class="reference internal image-reference" href="../_images/ICR_Slip.svg"><img alt="../_images/ICR_Slip.svg" src="../_images/ICR_Slip.svg" width="70%" /></a>
<p class="caption"><span class="caption-number">Fig. 23 </span><span class="caption-text">If the velocity direction of a wheel center (red arrow), does not coincide with the orientation of the wheel (gray dashed arrow), the tire is slipping to the side. The angle between the velocity (red) and the wheel orientation (gray dashed) is known as the side slip angle, or just slip angle. In general, it is different for each individual wheel.</span><a class="headerlink" href="#icr-slip" title="Permalink to this image">¶</a></p>
</div>
<p>For the <strong>kinematic four-wheel model</strong> the slip angles of all four tires are assumed to be zero. Let us think about what this means for the ICR. Since the slip angles are zero, the wheel orientations are equal to the wheel velocities. For each wheel we can mentally draw a dashed line perpendicular to the wheel orientation and hence wheel velocity like in <a class="reference internal" href="#icr-construction"><span class="std std-numref">Fig. 21</span></a>. Since the motion is planar, there needs to be an ICR, and hence all these dashed lines need to intersect in that ICR.</p>
<p>We consider the rear wheels first. Both have the same orientation. So we only know that the ICR is on the line moving through both rear wheels.</p>
<p>Next, consider the front wheels. If we choose some wheel steer angles <span class="math notranslate nohighlight">\((\delta_l, \delta_r)\)</span>, we have picked the wheel orientations. If we now draw dashed lines perpendicular to the wheel orientations like in <a class="reference internal" href="#icr-construction"><span class="std std-numref">Fig. 21</span></a>, we obtain the ICR. We can then check if this ICR lies on the line moving through both rear tires as it needs to (by our considerations about the rear wheels). If it does, our choice of <span class="math notranslate nohighlight">\((\delta_l, \delta_r)\)</span> was good and we have constructed a so-called <strong>Ackermann steering geometry</strong>. Note that in general <span class="math notranslate nohighlight">\(\delta_l \neq \delta_r\)</span>, which has important implications for practical steering systems.</p>
</div>
<div class="section" id="id1">
<h2>Kinematic Bicycle model<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>For the <strong>bicycle model</strong>, the two front wheels as well as the two rear wheels are lumped into one wheel each.</p>
<div class="figure align-default" id="bicyclemodel">
<a class="reference internal image-reference" href="../_images/BicycleModel.svg"><img alt="../_images/BicycleModel.svg" src="../_images/BicycleModel.svg" width="60%" /></a>
</div>
<p>The <strong>kinematic bicycle model</strong> is the <strong>bicycle model</strong> together with the assumption that all slip angles are zero. Using this assumption together with our knowledge about the ICR, we can derive practical formulas for the kinematic bicycle model using <a class="reference internal" href="#bicyclemodelgeometry"><span class="std std-numref">Fig. 24</span></a>.</p>
<div class="figure align-default" id="bicyclemodelgeometry">
<a class="reference internal image-reference" href="../_images/BicycleModelGeometry.svg"><img alt="../_images/BicycleModelGeometry.svg" src="../_images/BicycleModelGeometry.svg" width="70%" /></a>
<p class="caption"><span class="caption-number">Fig. 24 </span><span class="caption-text">Geometry of the bicycle model. The distance <span class="math notranslate nohighlight">\(L\)</span> between the wheels is called <em>wheel base</em>.</span><a class="headerlink" href="#bicyclemodelgeometry" title="Permalink to this image">¶</a></p>
</div>
<p>As we have learned in <a class="reference internal" href="#icr-construction"><span class="std std-numref">Fig. 21</span></a>, we construct the ICR by drawing dashed lines perpendicular to the wheel velocities (which are equal to the wheel orientations due to our assumption of no slip). By the property of the ICR, we know that the rear wheel will move along the black circular arc in <a class="reference internal" href="#bicyclemodelgeometry"><span class="std std-numref">Fig. 24</span></a>. Finally, you should convince yourself that the angle in the bottom left of <a class="reference internal" href="#bicyclemodelgeometry"><span class="std std-numref">Fig. 24</span></a> is equal to the wheel steer angle <span class="math notranslate nohighlight">\(\delta\)</span></p>
<div class="dropdown admonition">
<p class="admonition-title">Not convinced?</p>
<p><img alt="" src="../_images/pure_pursuit_simple_geometry.png" /></p>
</div>
<p>From the triangle in <a class="reference internal" href="#icr-construction"><span class="std std-numref">Fig. 21</span></a> we find</p>
<div class="math notranslate nohighlight">
\[ \tan(\delta) = \frac{L}{R}\]</div>
<p>Using <span class="math notranslate nohighlight">\(v = \Omega_z R\)</span>, where <span class="math notranslate nohighlight">\(v\)</span> denotes the velocity magnitude, we can solve this for the steer angle</p>
<div class="math notranslate nohighlight">
\[ \delta = \arctan \left( \frac{L \Omega_z}{v}\right)\]</div>
<p>If we define <span class="math notranslate nohighlight">\((x,y)\)</span> as the position of the rear wheel in some global reference frame, and <span class="math notranslate nohighlight">\(\theta\)</span> as the angle of the bicycle’s forwards direction with respect to the x-axis, then</p>
<div class="math notranslate nohighlight">
\[\dot{\theta} = \Omega_z =  \frac{v \tan(\delta)}{L}\]</div>
<p>If the relation <span class="math notranslate nohighlight">\(\dot{\theta} = \Omega_z\)</span> confuses you, remind yourself that the angular velocity <span class="math notranslate nohighlight">\(\mathbf{\Omega}\)</span> is independent of the reference point. Hence, the front wheel rotates about the rear wheel with angular velocity <span class="math notranslate nohighlight">\(\Omega_z\)</span>. Since the vector from the rear to the front wheel defines the vehicle forwards direction, this means that the “forwards vector” rotates with angular velocity <span class="math notranslate nohighlight">\(\Omega_z\)</span>.</p>
<p>If we define the state of our bicycle model as <span class="math notranslate nohighlight">\((x,y,\theta,v)\)</span>, then it has the nonlinear dynamics</p>
<div class="math notranslate nohighlight">
\[\begin{split}\frac{d}{dt}\begin{pmatrix} x\\ y\\ \theta\\ v \end{pmatrix} 
=\begin{pmatrix} v\cos(\theta)\\ v\sin(\theta) \\ v\tan(\delta)/L \\ a \end{pmatrix}\end{split}\]</div>
<p>Here, <span class="math notranslate nohighlight">\(a\)</span> is the forwards acceleration. We could have picked any other point between the front and rear wheel as the reference point <span class="math notranslate nohighlight">\((x,y)\)</span>. In this case the formulas would have been slightly more complicated.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you found this material difficult, or if you are interested in learning more, I recommend the <a class="reference external" href="https://www.youtube.com/playlist?list=PLW3FM5Kyc2_4PGkumkAHNXzWtgHhaYe1d">great lectures on Vehicle Dynamics and Control by Prof. Georg Schildbach on youtube</a>.</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./Control"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="PID.html" title="previous page">PID Control</a>
    <a class='right-next' id="next-link" href="PurePursuit.html" title="next page">Pure Pursuit</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Mario Theers<br/>
        
          <div class="extra_footer">
            <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a> This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.3da636dd464baa7582d2.js"></script>


    
    <!-- Google Analytics -->
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'G-SRKK1J7TS3', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>
    <script async src='https://www.google-analytics.com/analytics.js'></script>
    <!-- End Google Analytics -->
    
  </body>
</html>